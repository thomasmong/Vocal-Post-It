${ProjName}:
Periph_plumacro


Intended purpose:
To demonstrate the configuration and use of the Programmable Logic Unit (PLU).
This example does not use the code generated by the PLU tool 
This example provides an alternative method of configuring the PLU using the defined PLU macros (plu.h file)

Functional description:
A pre-defined schematics is attached to demonstrate the glue logic of the application.
Based on the schematics, in addition to the GUI PLU tool, some macros have been created to facilitate the generation of the PLU code.
 
To use the macros, you can number the gates(LUTs) from schematics first and the inputs and outputs
of the gates first, e.g. if there are two LUTs, the output of the first LUT (OR) can be the input of 
the next LUT (NOT), the macro will be like:
 
PLU_LUT_2IN_OR(ic0, INMUX_IN(Input_A), INMUX_IN(Input_B));
PLU_LUT_INVERTER(ic2, INMUX_LUT(ic0));

With the attached schematics that all LUTs have been numbered along with the PLU examples under 
plumacro.c, these macros are very intuitive. You can compare the results using this example with 
the PLU example generated by the PLU tool (periph_plu), it should produce the same results.


A LPCXpresso804 PLU shield board is required to run this application. On the board, a number of 
switches are used act as PLU inputs and LEDs are used to monitor the PLU outputs. Due to the limited
number of pins on the chip/board, some of the inputs and outputs are shared.

This example does not use a Flip Flop. 
To use a Flip Flop, the PIO0_1 must be driven externally by the oscillator on the PLU sheild board

PLU		IN0(A)		p0.0
PLU		IN1(B)		p0.1	(This pin can driven by the oscillator on the PLU shield board or by manually toggling the pin)
PLU		IN2(C)		p0.10
PLU		IN3(D)		p0.11
PLU		IN4(E)		p0.4
PLU		IN5(F)		p0.13

PLU		OUT0		p0.7
PLU		OUT1		p0.15
PLU		OUT2		p0.16
PLU		OUT3		p0.10
PLU 	OUT4		p0.18
PLU		OUT5		p0.12
PLU		OUT6		p0.20
PLU		OUT7		p0.14


External connections:
* PLU shield board is required.
* Refer to Jumper settings.pdf file under docs for Jumper connections on LPC804 and the PLU shield board. 

Detailed Program Flow:
* This example runs at 30 MHz.
  See function SystemInit() and chip_setup.h.


* main() routine
   1. Turn on clocks to peripherals
   2. Configure the SWM for PLU inputs, outputs, and clock input.
   3. PLU Source code is generated by using the pre-defined macros. 
   4. PLU is free running while all other peripheral driver such as
Multi-timer blinky example can be expanded at the end of the PLU code,
just before the last while (1). 
  
This example runs from Flash. 


To run this code: 1. Build
                  2. Load to flash
                  3. Reset
              or:
                  1. Build
                  2. Download and Debug
                  3. Run or Go


Note: It may be necessary to power-cycle the board in order to regain control of the reset button after programming.





